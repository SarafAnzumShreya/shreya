<button id="back-to-top" class="back-to-top" aria-label="Back to top" title="Back to top" type="button" hidden>
  <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
    <path d="M12 8l6 6H6z" fill="currentColor"/>
  </svg>
</button>
<script>
(function(){
  const btn = document.getElementById('back-to-top');
  if(!btn) return;
  const SHOW_AFTER = 300;
  const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  function scrollTop() {
    if (prefersReduced) window.scrollTo(0,0);
    else window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  btn.addEventListener('click', scrollTop);
  btn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); scrollTop(); }
  });

  function updateVisibility() {
    const visible = window.scrollY > SHOW_AFTER;
    btn.hidden = !visible;
    btn.setAttribute('aria-hidden', String(!visible));
  }

  document.addEventListener('scroll', updateVisibility, { passive: true });
  updateVisibility();
})();
</script>